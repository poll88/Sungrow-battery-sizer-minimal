# translations.py

LANG_CHOICES = [
    ("en", "English"),
    ("de", "Deutsch"),
    ("it", "Italiano"),
    ("fr", "Fran√ßais"),
    ("es", "Espa√±ol")
]

TRANSLATIONS = {
    "en": {
        "title": "üîã Sungrow Battery Sizer",
        "subtitle": "Estimate the ideal Sungrow battery and inverter size for your PV system.",
        "system_type": "System type",
        "pv_consumption": "Your PV & Consumption",
        "modules_installed": "Total PV modules installed",
        "module_wattage": "Module wattage (Wp)",
        "annual_consumption": "Annual electricity consumption (kWh)",
        "roof_layout": "Roof layout",
        "where_modules": "Where are your modules?",
        "all_one_side": "All on one side",
        "split_two_sides": "Split across two opposite sides",
        "orientation": "Orientation",
        "tilt": "Tilt (degrees)",
        "main_side_orientation": "Main side orientation",
        "daily_load_profile": "Daily load profile",
        "choose_profile": "Choose a profile",
        "p_balanced": "Balanced day/night",
        "p_workday": "Workday away (lower daytime use)",
        "p_home": "Home most of day",
        "p_evening": "Evening peaks",
        "p_heatpump": "Heat pump / daytime loads",
        "p_custom": "Custom",
        "custom_day_pct": "Custom: % of daily load in daytime",
        "backup_optional": "Backup (optional)",
        "backup_kw": "Critical load power (kW)",
        "backup_h": "Duration of backup (hours)",
        "advanced": "Advanced settings",
        "specific_yield": "Specific PV yield (kWh/kWp/year)",
        "rte": "Battery round-trip efficiency",
        "dod": "Battery usable depth of discharge",
        "degradation": "Extra capacity reserve for degradation",
        "calculate": "Calculate recommendation",
        "inv_reco": "Inverter recommendation",
        "pv_dc_size": "PV DC size",
        "suggested_inverter": "Suggested inverter model",
        "dcac_help": "DC/AC ratio is {ratio}, max allowed is {cap}",
        "dcac_warn": "Your DC/AC ratio exceeds the max {cap}",
        "backup_power_warn": "Backup power need ({need} kW) exceeds inverter AC rating ({ac} kW)",
        "battery_inputs": "Battery sizing inputs",
        "orientation_tilt_line": "Orientation: {orientation}, Tilt: {tilt}¬∞",
        "profile_line": "Profile: {profile} ‚Äî Day {day}% / Night {night}%",
        "daily_load_line": "Daily load: {daily_load:.1f} kWh ‚Äî PV generation: {daily_pv:.1f} kWh/day ({dc_kw:.1f} kW DC √ó {specific_yield:.0f} kWh/kWp/year)",
        "day_night_line": "Day load: {day_load:.1f} kWh ‚Äî Night load: {night_load:.1f} kWh",
        "surplus_shift_line": "Day surplus: {surplus:.1f} kWh ‚Äî Shiftable to night: {shiftable:.1f} kWh",
        "two_side_caption": "East/West layout reduces midday peak and increases morning/evening production.",
        "backup_req_line": "Backup need: {kw:.1f} kW √ó {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Suggested battery model",
        "usable_capacity": "Usable capacity",
        "suggested_battery": "Suggested model",
        "no_battery": "No battery recommended",
        "rounded_caption": "Rounded to nearest step for {battery_type} ({battery_step_display}).",
        "breakdown_line": "Self-consumption: {self:.1f} kWh + Backup reserve: {backup:.1f} kWh = Total: {total:.1f} kWh",
        "small_benefit": "Battery benefit too small based on your inputs.",
        "sanity": "System constraints & sanity check",
        "mppt_strings": "MPPTs: {mppts}, Max strings total: {strings}",
        "string_current": "Max string current: {current} A",
        "dcac_cap": "Max DC/AC ratio: {cap}",
        "quick_estimate": "This is a quick sizing tool ‚Äî confirm with your installer.",
        "landing_hint": "Fill in your PV system details above to get a recommendation.",
        "south": "South", "southeast": "South-East", "southwest": "South-West",
        "east": "East", "west": "West", "north": "North",
        "northeast": "North-East", "northwest": "North-West"
    },
    # --- German ---
    "de": {
        "title": "üîã Sungrow Batteriesizer",
        "subtitle": "Sch√§tzen Sie die ideale Sungrow-Batterie- und Wechselrichtergr√∂√üe f√ºr Ihre PV-Anlage.",
        "system_type": "Systemtyp",
        "pv_consumption": "Ihre PV- & Verbrauchsdaten",
        "modules_installed": "Gesamtzahl der PV-Module",
        "module_wattage": "Modulleistung (Wp)",
        "annual_consumption": "J√§hrlicher Stromverbrauch (kWh)",
        "roof_layout": "Dachanordnung",
        "where_modules": "Wo sind Ihre Module?",
        "all_one_side": "Alle auf einer Seite",
        "split_two_sides": "Auf zwei gegen√ºberliegenden Seiten verteilt",
        "orientation": "Ausrichtung",
        "tilt": "Neigung (Grad)",
        "main_side_orientation": "Ausrichtung Hauptseite",
        "daily_load_profile": "T√§gliches Lastprofil",
        "choose_profile": "Profil ausw√§hlen",
        "p_balanced": "Ausgeglichen Tag/Nacht",
        "p_workday": "Arbeitstag abwesend (weniger Tageslast)",
        "p_home": "Meistens zuhause",
        "p_evening": "Abendspitzen",
        "p_heatpump": "W√§rmepumpe / Tageslasten",
        "p_custom": "Benutzerdefiniert",
        "custom_day_pct": "Benutzerdefiniert: % der Tageslast am Tag",
        "backup_optional": "Backup (optional)",
        "backup_kw": "Kritische Lastleistung (kW)",
        "backup_h": "Dauer des Backups (Stunden)",
        "advanced": "Erweiterte Einstellungen",
        "specific_yield": "Spezifischer PV-Ertrag (kWh/kWp/Jahr)",
        "rte": "Batterie-Wirkungsgrad",
        "dod": "Batterie-Nutzungstiefe",
        "degradation": "Zus√§tzliche Kapazit√§tsreserve f√ºr Alterung",
        "calculate": "Empfehlung berechnen",
        "inv_reco": "Wechselrichterempfehlung",
        "pv_dc_size": "PV-DC-Leistung",
        "suggested_inverter": "Empfohlenes Modell",
        "dcac_help": "DC/AC-Verh√§ltnis: {ratio}, max erlaubt: {cap}",
        "dcac_warn": "Ihr DC/AC-Verh√§ltnis √ºberschreitet das Maximum {cap}",
        "backup_power_warn": "Backup-Leistung ({need} kW) √ºbersteigt AC-Nennleistung ({ac} kW)",
        "battery_inputs": "Eingaben zur Batteriesizing",
        "orientation_tilt_line": "Ausrichtung: {orientation}, Neigung: {tilt}¬∞",
        "profile_line": "Profil: {profile} ‚Äî Tag {day}% / Nacht {night}%",
        "daily_load_line": "Tageslast: {daily_load:.1f} kWh ‚Äî PV-Erzeugung: {daily_pv:.1f} kWh/Tag ({dc_kw:.1f} kW DC √ó {specific_yield:.0f} kWh/kWp/Jahr)",
        "day_night_line": "Tageslast: {day_load:.1f} kWh ‚Äî Nachtlast: {night_load:.1f} kWh",
        "surplus_shift_line": "Tag√ºberschuss: {surplus:.1f} kWh ‚Äî Verschiebbar in Nacht: {shiftable:.1f} kWh",
        "two_side_caption": "Ost/West-Anordnung reduziert Mittags-Peak und erh√∂ht Morgen/Abendproduktion.",
        "backup_req_line": "Backup-Bedarf: {kw:.1f} kW √ó {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Empfohlene Batterie",
        "usable_capacity": "Nutzbare Kapazit√§t",
        "suggested_battery": "Empfohlenes Modell",
        "no_battery": "Keine Batterie empfohlen",
        "rounded_caption": "Aufgerundet auf n√§chstes {battery_type}-Schrittma√ü ({battery_step_display}).",
        "breakdown_line": "Eigenverbrauch: {self:.1f} kWh + Backup-Reserve: {backup:.1f} kWh = Gesamt: {total:.1f} kWh",
        "small_benefit": "Batterienutzen zu gering basierend auf Ihren Eingaben.",
        "sanity": "Systemgrenzen & Pr√ºfung",
        "mppt_strings": "MPPTs: {mppts}, Max Strings gesamt: {strings}",
        "string_current": "Max. Stringstrom: {current} A",
        "dcac_cap": "Max DC/AC-Verh√§ltnis: {cap}",
        "quick_estimate": "Dies ist ein Schnellrechner ‚Äì bitte mit Installateur best√§tigen.",
        "landing_hint": "Geben Sie oben Ihre PV-Anlagedaten ein, um eine Empfehlung zu erhalten.",
        "south": "S√ºd", "southeast": "S√ºdost", "southwest": "S√ºdwest",
        "east": "Ost", "west": "West", "north": "Nord",
        "northeast": "Nordost", "northwest": "Nordwest"
    },
    # --- Italian ---
    "it": {
        "title": "üîã Calcolatore Batteria Sungrow",
        "subtitle": "Stima la dimensione ideale della batteria e dell'inverter Sungrow per il tuo impianto FV.",
        "system_type": "Tipo di sistema",
        "pv_consumption": "Il tuo FV e consumo",
        "modules_installed": "Numero totale di moduli FV",
        "module_wattage": "Potenza modulo (Wp)",
        "annual_consumption": "Consumo annuo di energia (kWh)",
        "roof_layout": "Disposizione del tetto",
        "where_modules": "Dove sono i tuoi moduli?",
        "all_one_side": "Tutti su un lato",
        "split_two_sides": "Su due lati opposti",
        "orientation": "Orientamento",
        "tilt": "Inclinazione (gradi)",
        "main_side_orientation": "Orientamento lato principale",
        "daily_load_profile": "Profilo di carico giornaliero",
        "choose_profile": "Scegli un profilo",
        "p_balanced": "Bilanciato giorno/notte",
        "p_workday": "Giorno lavorativo fuori casa",
        "p_home": "A casa la maggior parte del giorno",
        "p_evening": "Picchi serali",
        "p_heatpump": "Pompa di calore / carichi diurni",
        "p_custom": "Personalizzato",
        "custom_day_pct": "% carico giornaliero diurno",
        "backup_optional": "Backup (opzionale)",
        "backup_kw": "Potenza carichi critici (kW)",
        "backup_h": "Durata backup (ore)",
        "advanced": "Impostazioni avanzate",
        "specific_yield": "Rendimento specifico FV (kWh/kWp/anno)",
        "rte": "Efficienza ciclo carica/scarica",
        "dod": "Profondit√† di scarica utilizzabile",
        "degradation": "Riserva extra per degradazione",
        "calculate": "Calcola raccomandazione",
        "inv_reco": "Inverter raccomandato",
        "pv_dc_size": "Potenza FV DC",
        "suggested_inverter": "Modello suggerito",
        "dcac_help": "Rapporto DC/AC {ratio}, max consentito {cap}",
        "dcac_warn": "Rapporto DC/AC supera il massimo {cap}",
        "backup_power_warn": "Potenza backup richiesta ({need} kW) supera AC inverter ({ac} kW)",
        "battery_inputs": "Dati per calcolo batteria",
        "orientation_tilt_line": "Orientamento: {orientation}, Inclinazione: {tilt}¬∞",
        "profile_line": "Profilo: {profile} ‚Äî Giorno {day}% / Notte {night}%",
        "daily_load_line": "Carico giornaliero: {daily_load:.1f} kWh ‚Äî Produzione FV: {daily_pv:.1f} kWh/giorno ({dc_kw:.1f} kW DC √ó {specific_yield:.0f} kWh/kWp/anno)",
        "day_night_line": "Carico giorno: {day_load:.1f} kWh ‚Äî Carico notte: {night_load:.1f} kWh",
        "surplus_shift_line": "Eccesso giorno: {surplus:.1f} kWh ‚Äî Spostabile a notte: {shiftable:.1f} kWh",
        "two_side_caption": "Disposizione Est/Ovest riduce picco di mezzogiorno e aumenta produzione mattina/sera.",
        "backup_req_line": "Richiesta backup: {kw:.1f} kW √ó {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Batteria consigliata",
        "usable_capacity": "Capacit√† utilizzabile",
        "suggested_battery": "Modello suggerito",
        "no_battery": "Nessuna batteria consigliata",
        "rounded_caption": "Arrotondato al passo pi√π vicino per {battery_type} ({battery_step_display}).",
        "breakdown_line": "Autoconsumo: {self:.1f} kWh + Riserva backup: {backup:.1f} kWh = Totale: {total:.1f} kWh",
        "small_benefit": "Beneficio batteria troppo basso per i tuoi dati.",
        "sanity": "Limiti di sistema e verifica",
        "mppt_strings": "MPPT: {mppts}, Stringhe max totali: {strings}",
        "string_current": "Corrente max stringa: {current} A",
        "dcac_cap": "Rapporto DC/AC max: {cap}",
        "quick_estimate": "Calcolo rapido ‚Äî conferma con l‚Äôinstallatore.",
        "landing_hint": "Inserisci i dati FV per ottenere raccomandazione.",
        "south": "Sud", "southeast": "Sud-Est", "southwest": "Sud-Ovest",
        "east": "Est", "west": "Ovest", "north": "Nord",
        "northeast": "Nord-Est", "northwest": "Nord-Ovest"
    },
    # --- French ---
    "fr": {
        "title": "üîã Calculateur de Batterie Sungrow",
        "subtitle": "Estimez la taille id√©ale de batterie et d'onduleur Sungrow pour votre installation PV.",
        "system_type": "Type de syst√®me",
        "pv_consumption": "Votre PV & consommation",
        "modules_installed": "Nombre total de modules PV",
        "module_wattage": "Puissance du module (Wp)",
        "annual_consumption": "Consommation annuelle d'√©lectricit√© (kWh)",
        "roof_layout": "Disposition du toit",
        "where_modules": "O√π sont vos modules ?",
        "all_one_side": "Tous d'un c√¥t√©",
        "split_two_sides": "R√©partis sur deux c√¥t√©s oppos√©s",
        "orientation": "Orientation",
        "tilt": "Inclinaison (degr√©s)",
        "main_side_orientation": "Orientation c√¥t√© principal",
        "daily_load_profile": "Profil de charge journalier",
        "choose_profile": "Choisir un profil",
        "p_balanced": "√âquilibr√© jour/nuit",
        "p_workday": "En journ√©e au travail (faible usage diurne)",
        "p_home": "√Ä la maison la plupart de la journ√©e",
        "p_evening": "Pics en soir√©e",
        "p_heatpump": "Pompe √† chaleur / charges diurnes",
        "p_custom": "Personnalis√©",
        "custom_day_pct": "% de la charge quotidienne en journ√©e",
        "backup_optional": "Backup (optionnel)",
        "backup_kw": "Puissance des charges critiques (kW)",
        "backup_h": "Dur√©e du backup (heures)",
        "advanced": "Param√®tres avanc√©s",
        "specific_yield": "Productible PV sp√©cifique (kWh/kWp/an)",
        "rte": "Rendement aller-retour batterie",
        "dod": "Profondeur de d√©charge utilisable",
        "degradation": "R√©serve de capacit√© suppl√©mentaire pour d√©gradation",
        "calculate": "Calculer la recommandation",
        "inv_reco": "Onduleur recommand√©",
        "pv_dc_size": "Puissance PV DC",
        "suggested_inverter": "Mod√®le sugg√©r√©",
        "dcac_help": "Rapport DC/AC {ratio}, max autoris√© {cap}",
        "dcac_warn": "Rapport DC/AC d√©passe le max {cap}",
        "backup_power_warn": "Besoins backup ({need} kW) d√©passent la puissance AC ({ac} kW)",
        "battery_inputs": "Donn√©es pour dimensionnement batterie",
        "orientation_tilt_line": "Orientation : {orientation}, Inclinaison : {tilt}¬∞",
        "profile_line": "Profil : {profile} ‚Äî Jour {day}% / Nuit {night}%",
        "daily_load_line": "Charge journali√®re : {daily_load:.1f} kWh ‚Äî Production PV : {daily_pv:.1f} kWh/jour ({dc_kw:.1f} kW DC √ó {specific_yield:.0f} kWh/kWp/an)",
        "day_night_line": "Charge jour : {day_load:.1f} kWh ‚Äî Charge nuit : {night_load:.1f} kWh",
        "surplus_shift_line": "Surplus jour : {surplus:.1f} kWh ‚Äî Transf√©rable la nuit : {shiftable:.1f} kWh",
        "two_side_caption": "Disposition Est/Ouest r√©duit le pic de midi et augmente la production matin/soir.",
        "backup_req_line": "Besoins backup : {kw:.1f} kW √ó {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Batterie recommand√©e",
        "usable_capacity": "Capacit√© utilisable",
        "suggested_battery": "Mod√®le sugg√©r√©",
        "no_battery": "Aucune batterie recommand√©e",
        "rounded_caption": "Arrondi √† l'√©tape la plus proche pour {battery_type} ({battery_step_display}).",
        "breakdown_line": "Autoconsommation : {self:.1f} kWh + R√©serve backup : {backup:.1f} kWh = Total : {total:.1f} kWh",
        "small_benefit": "Avantage batterie trop faible selon vos donn√©es.",
        "sanity": "Contraintes syst√®me & v√©rification",
        "mppt_strings": "MPPT : {mppts}, Nombre max de strings : {strings}",
        "string_current": "Courant max string : {current} A",
        "dcac_cap": "Rapport DC/AC max : {cap}",
        "quick_estimate": "Ceci est un calcul rapide ‚Äî confirmez avec votre installateur.",
        "landing_hint": "Remplissez vos donn√©es PV ci-dessus pour obtenir une recommandation.",
        "south": "Sud", "southeast": "Sud-Est", "southwest": "Sud-Ouest",
        "east": "Est", "west": "Ouest", "north": "Nord",
        "northeast": "Nord-Est", "northwest": "Nord-Ouest"
    },
    # --- Spanish ---
    "es": {
        "title": "üîã Calculadora de Bater√≠a Sungrow",
        "subtitle": "Estima el tama√±o ideal de la bater√≠a e inversor Sungrow para tu sistema FV.",
        "system_type": "Tipo de sistema",
        "pv_consumption": "Tu FV y consumo",
        "modules_installed": "N√∫mero total de m√≥dulos FV",
        "module_wattage": "Potencia del m√≥dulo (Wp)",
        "annual_consumption": "Consumo anual de electricidad (kWh)",
        "roof_layout": "Dise√±o del tejado",
        "where_modules": "¬øD√≥nde est√°n tus m√≥dulos?",
        "all_one_side": "Todos en un lado",
        "split_two_sides": "Divididos en dos lados opuestos",
        "orientation": "Orientaci√≥n",
        "tilt": "Inclinaci√≥n (grados)",
        "main_side_orientation": "Orientaci√≥n del lado principal",
        "daily_load_profile": "Perfil de carga diario",
        "choose_profile": "Elegir un perfil",
        "p_balanced": "Equilibrado d√≠a/noche",
        "p_workday": "D√≠a laboral fuera de casa",
        "p_home": "En casa la mayor parte del d√≠a",
        "p_evening": "Picos nocturnos",
        "p_heatpump": "Bomba de calor / cargas diurnas",
        "p_custom": "Personalizado",
        "custom_day_pct": "% de carga diaria en el d√≠a",
        "backup_optional": "Respaldo (opcional)",
        "backup_kw": "Potencia de cargas cr√≠ticas (kW)",
        "backup_h": "Duraci√≥n del respaldo (horas)",
        "advanced": "Configuraciones avanzadas",
        "specific_yield": "Producci√≥n espec√≠fica FV (kWh/kWp/a√±o)",
        "rte": "Eficiencia ciclo completo bater√≠a",
        "dod": "Profundidad de descarga utilizable",
        "degradation": "Reserva extra por degradaci√≥n",
        "calculate": "Calcular recomendaci√≥n",
        "inv_reco": "Inversor recomendado",
        "pv_dc_size": "Potencia FV DC",
        "suggested_inverter": "Modelo sugerido",
        "dcac_help": "Relaci√≥n DC/AC {ratio}, m√°ximo permitido {cap}",
        "dcac_warn": "Relaci√≥n DC/AC supera el m√°ximo {cap}",
        "backup_power_warn": "Necesidad de respaldo ({need} kW) excede la potencia AC ({ac} kW)",
        "battery_inputs": "Datos para dimensionar la bater√≠a",
        "orientation_tilt_line": "Orientaci√≥n: {orientation}, Inclinaci√≥n: {tilt}¬∞",
        "profile_line": "Perfil: {profile} ‚Äî D√≠a {day}% / Noche {night}%",
        "daily_load_line": "Carga diaria: {daily_load:.1f} kWh ‚Äî Producci√≥n FV: {daily_pv:.1f} kWh/d√≠a ({dc_kw:.1f} kW DC √ó {specific_yield:.0f} kWh/kWp/a√±o)",
        "day_night_line": "Carga d√≠a: {day_load:.1f} kWh ‚Äî Carga noche: {night_load:.1f} kWh",
        "surplus_shift_line": "Excedente d√≠a: {surplus:.1f} kWh ‚Äî Transferible a noche: {shiftable:.1f} kWh",
        "two_side_caption": "Disposici√≥n Este/Oeste reduce el pico del mediod√≠a y aumenta producci√≥n ma√±ana/tarde.",
        "backup_req_line": "Necesidad de respaldo: {kw:.1f} kW √ó {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Bater√≠a recomendada",
        "usable_capacity": "Capacidad utilizable",
        "suggested_battery": "Modelo sugerido",
        "no_battery": "No se recomienda bater√≠a",
        "rounded_caption": "Redondeado al paso m√°s cercano para {battery_type} ({battery_step_display}).",
        "breakdown_line": "Autoconsumo: {self:.1f} kWh + Reserva respaldo: {backup:.1f} kWh = Total: {total:.1f} kWh",
        "small_benefit": "Beneficio de bater√≠a demasiado peque√±o seg√∫n tus datos.",
        "sanity": "Restricciones del sistema y verificaci√≥n",
        "mppt_strings": "MPPT: {mppts}, M√°x. cadenas totales: {strings}",
        "string_current": "Corriente m√°x. por cadena: {current} A",
        "dcac_cap": "Relaci√≥n DC/AC m√°x: {cap}",
        "quick_estimate": "C√°lculo r√°pido ‚Äî confirma con tu instalador.",
        "landing_hint": "Introduce los datos FV para obtener recomendaci√≥n.",
        "south": "Sur", "southeast": "Sureste", "southwest": "Suroeste",
        "east": "Este", "west": "Oeste", "north": "Norte",
        "northeast": "Noreste", "northwest": "Noroeste"
    }
}

def get_text(lang, key):
    return TRANSLATIONS.get(lang, {}).get(key, TRANSLATIONS["en"].get(key, key))