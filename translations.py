# translations.py

LANG_CHOICES = [
    ("en", "English"),
    ("de", "Deutsch"),
    ("it", "Italiano"),
    ("fr", "FranÃ§ais"),
    ("es", "EspaÃ±ol")
]

TRANSLATIONS = {
    "en": {
        "title": "ðŸ”‹ Sungrow Battery Sizer",
        "subtitle": "Estimate the ideal Sungrow battery and inverter size for your PV system.",
        "system_type": "System type",
        "pv_consumption": "Your PV & Consumption",
        "modules_installed": "Total PV modules installed",
        "module_wattage": "Module wattage (Wp)",
        "annual_consumption": "Annual electricity consumption (kWh)",
        "roof_layout": "Roof layout",
        "where_modules": "Where are your modules?",
        "all_one_side": "All on one side",
        "split_two_sides": "Split across two opposite sides",
        "orientation": "Orientation",
        "tilt": "Tilt (degrees)",
        "main_side_orientation": "Main side orientation",
        "daily_load_profile": "Daily load profile",
        "choose_profile": "Choose a profile",
        "p_balanced": "Balanced day/night",
        "p_workday": "Workday away (lower daytime use)",
        "p_home": "Home most of day",
        "p_evening": "Evening peaks",
        "p_heatpump": "Heat pump / daytime loads",
        "p_custom": "Custom",
        "custom_day_pct": "Custom: % of daily load in daytime",
        "backup_optional": "Backup (optional)",
        "backup_kw": "Critical load power (kW)",
        "backup_h": "Duration of backup (hours)",
        "advanced": "Advanced settings",
        "specific_yield": "Specific PV yield (kWh/kWp/year)",
        "rte": "Battery round-trip efficiency",
        "dod": "Battery usable depth of discharge",
        "degradation": "Extra capacity reserve for degradation",
        "calculate": "Calculate recommendation",
        "inv_reco": "Inverter recommendation",
        "pv_dc_size": "PV DC size",
        "suggested_inverter": "Suggested inverter model",
        "dcac_help": "DC/AC ratio is {ratio}, max allowed is {cap}",
        "dcac_warn": "Your DC/AC ratio exceeds the max {cap}",
        "backup_power_warn": "Backup power need ({need} kW) exceeds inverter AC rating ({ac} kW)",
        "battery_inputs": "Battery sizing inputs",
        "orientation_tilt_line": "Orientation: {orientation}, Tilt: {tilt}Â°",
        "profile_line": "Profile: {profile} â€” Day {day}% / Night {night}%",
        "daily_load_line": "Daily load: {daily_load:.1f} kWh â€” PV generation: {daily_pv:.1f} kWh/day ({dc_kw:.1f} kW DC Ã— {specific_yield:.0f} kWh/kWp/year)",
        "day_night_line": "Day load: {day_load:.1f} kWh â€” Night load: {night_load:.1f} kWh",
        "surplus_shift_line": "Day surplus: {surplus:.1f} kWh â€” Shiftable to night: {shiftable:.1f} kWh",
        "two_side_caption": "East/West layout reduces midday peak and increases morning/evening production.",
        "backup_req_line": "Backup need: {kw:.1f} kW Ã— {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Suggested battery model",
        "usable_capacity": "Usable capacity",
        "suggested_battery": "Suggested model",
        "no_battery": "No battery recommended",
        "rounded_caption": "Rounded to nearest step for {battery_type} ({battery_step_display}).",
        "breakdown_line": "Self-consumption: {self:.1f} kWh + Backup reserve: {backup:.1f} kWh = Total: {total:.1f} kWh",
        "small_benefit": "Battery benefit too small based on your inputs.",
        "sanity": "System constraints & sanity check",
        "mppt_strings": "MPPTs: {mppts}, Max strings total: {strings}",
        "string_current": "Max string current: {current} A",
        "dcac_cap": "Max DC/AC ratio: {cap}",
        "quick_estimate": "This is a quick sizing tool â€” confirm with your installer.",
        "landing_hint": "Fill in your PV system details above to get a recommendation.",
        "south": "South", "southeast": "South-East", "southwest": "South-West",
        "east": "East", "west": "West", "north": "North",
        "northeast": "North-East", "northwest": "North-West"
    },
    # --- German ---
    "de": { ... same as before ... },
    # --- Italian ---
    "it": {
        "title": "ðŸ”‹ Calcolatore Batteria Sungrow",
        "subtitle": "Stima la dimensione ideale della batteria e dell'inverter Sungrow per il tuo impianto FV.",
        "system_type": "Tipo di sistema",
        "pv_consumption": "Il tuo FV e consumo",
        "modules_installed": "Numero totale di moduli FV",
        "module_wattage": "Potenza modulo (Wp)",
        "annual_consumption": "Consumo annuo di energia (kWh)",
        "roof_layout": "Disposizione del tetto",
        "where_modules": "Dove sono i tuoi moduli?",
        "all_one_side": "Tutti su un lato",
        "split_two_sides": "Su due lati opposti",
        "orientation": "Orientamento",
        "tilt": "Inclinazione (gradi)",
        "main_side_orientation": "Orientamento lato principale",
        "daily_load_profile": "Profilo di carico giornaliero",
        "choose_profile": "Scegli un profilo",
        "p_balanced": "Bilanciato giorno/notte",
        "p_workday": "Giorno lavorativo fuori casa",
        "p_home": "A casa la maggior parte del giorno",
        "p_evening": "Picchi serali",
        "p_heatpump": "Pompa di calore / carichi diurni",
        "p_custom": "Personalizzato",
        "custom_day_pct": "% carico giornaliero diurno",
        "backup_optional": "Backup (opzionale)",
        "backup_kw": "Potenza carichi critici (kW)",
        "backup_h": "Durata backup (ore)",
        "advanced": "Impostazioni avanzate",
        "specific_yield": "Rendimento specifico FV (kWh/kWp/anno)",
        "rte": "Efficienza ciclo carica/scarica",
        "dod": "ProfonditÃ  di scarica utilizzabile",
        "degradation": "Riserva extra per degradazione",
        "calculate": "Calcola raccomandazione",
        "inv_reco": "Inverter raccomandato",
        "pv_dc_size": "Potenza FV DC",
        "suggested_inverter": "Modello suggerito",
        "dcac_help": "Rapporto DC/AC {ratio}, max consentito {cap}",
        "dcac_warn": "Rapporto DC/AC supera il massimo {cap}",
        "backup_power_warn": "Potenza backup richiesta ({need} kW) supera AC inverter ({ac} kW)",
        "battery_inputs": "Dati per calcolo batteria",
        "orientation_tilt_line": "Orientamento: {orientation}, Inclinazione: {tilt}Â°",
        "profile_line": "Profilo: {profile} â€” Giorno {day}% / Notte {night}%",
        "daily_load_line": "Carico giornaliero: {daily_load:.1f} kWh â€” Produzione FV: {daily_pv:.1f} kWh/giorno ({dc_kw:.1f} kW DC Ã— {specific_yield:.0f} kWh/kWp/anno)",
        "day_night_line": "Carico giorno: {day_load:.1f} kWh â€” Carico notte: {night_load:.1f} kWh",
        "surplus_shift_line": "Eccesso giorno: {surplus:.1f} kWh â€” Spostabile a notte: {shiftable:.1f} kWh",
        "two_side_caption": "Disposizione Est/Ovest riduce picco di mezzogiorno e aumenta produzione mattina/sera.",
        "backup_req_line": "Richiesta backup: {kw:.1f} kW Ã— {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Batteria consigliata",
        "usable_capacity": "CapacitÃ  utilizzabile",
        "suggested_battery": "Modello suggerito",
        "no_battery": "Nessuna batteria consigliata",
        "rounded_caption": "Arrotondato al passo piÃ¹ vicino per {battery_type} ({battery_step_display}).",
        "breakdown_line": "Autoconsumo: {self:.1f} kWh + Riserva backup: {backup:.1f} kWh = Totale: {total:.1f} kWh",
        "small_benefit": "Beneficio batteria troppo basso per i tuoi dati.",
        "sanity": "Limiti di sistema e verifica",
        "mppt_strings": "MPPT: {mppts}, Stringhe max totali: {strings}",
        "string_current": "Corrente max stringa: {current} A",
        "dcac_cap": "Rapporto DC/AC max: {cap}",
        "quick_estimate": "Calcolo rapido â€” conferma con lâ€™installatore.",
        "landing_hint": "Inserisci i dati FV per ottenere raccomandazione.",
        "south": "Sud", "southeast": "Sud-Est", "southwest": "Sud-Ovest",
        "east": "Est", "west": "Ovest", "north": "Nord",
        "northeast": "Nord-Est", "northwest": "Nord-Ovest"
    },
    # --- French ---
    "fr": { ... },
    # --- Spanish ---
    "es": { ... }
}

def get_text(lang, key):
    return TRANSLATIONS.get(lang, {}).get(key, TRANSLATIONS["en"].get(key, key))