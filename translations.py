# translations.py

LANG_CHOICES = [
    ("en", "English"),
    ("de", "Deutsch"),
    ("it", "Italiano"),
    ("fr", "FranÃ§ais"),
    ("es", "EspaÃ±ol")
]

TRANSLATIONS = {
    "en": {
        "title": "ðŸ”‹ Sungrow Battery Sizer",
        "subtitle": "Estimate the ideal Sungrow battery and inverter size for your PV system.",
        "system_type": "System type",
        "pv_consumption": "Your PV & Consumption",
        "modules_installed": "Total PV modules installed",
        "module_wattage": "Module wattage (Wp)",
        "annual_consumption": "Annual electricity consumption (kWh)",
        "roof_layout": "Roof layout",
        "where_modules": "Where are your modules?",
        "all_one_side": "All on one side",
        "split_two_sides": "Split across two opposite sides",
        "orientation": "Orientation",
        "tilt": "Tilt (degrees)",
        "main_side_orientation": "Main side orientation",
        "daily_load_profile": "Daily load profile",
        "choose_profile": "Choose a profile",
        "p_balanced": "Balanced day/night",
        "p_workday": "Workday away (lower daytime use)",
        "p_home": "Home most of day",
        "p_evening": "Evening peaks",
        "p_heatpump": "Heat pump / daytime loads",
        "p_custom": "Custom",
        "custom_day_pct": "Custom: % of daily load in daytime",
        "backup_optional": "Backup (optional)",
        "backup_kw": "Critical load power (kW)",
        "backup_h": "Duration of backup (hours)",
        "advanced": "Advanced settings",
        "specific_yield": "Specific PV yield (kWh/kWp/year)",
        "rte": "Battery round-trip efficiency",
        "dod": "Battery usable depth of discharge",
        "degradation": "Extra capacity reserve for degradation",
        "calculate": "Calculate recommendation",
        "inv_reco": "Inverter recommendation",
        "pv_dc_size": "PV DC size",
        "suggested_inverter": "Suggested inverter model",
        "dcac_help": "DC/AC ratio is {ratio}, max allowed is {cap}",
        "dcac_warn": "Your DC/AC ratio exceeds the max {cap}",
        "backup_power_warn": "Backup power need ({need} kW) exceeds inverter AC rating ({ac} kW)",
        "battery_inputs": "Battery sizing inputs",
        "orientation_tilt_line": "Orientation: {orientation}, Tilt: {tilt}Â°",
        "profile_line": "Profile: {profile} â€” Day {day}% / Night {night}%",
        "daily_load_line": "Daily load: {daily_load:.1f} kWh â€” PV generation: {daily_pv:.1f} kWh/day ({dc_kw:.1f} kW DC Ã— {specific_yield:.0f} kWh/kWp/year)",
        "day_night_line": "Day load: {day_load:.1f} kWh â€” Night load: {night_load:.1f} kWh",
        "surplus_shift_line": "Day surplus: {surplus:.1f} kWh â€” Shiftable to night: {shiftable:.1f} kWh",
        "two_side_caption": "East/West layout reduces midday peak and increases morning/evening production.",
        "backup_req_line": "Backup need: {kw:.1f} kW Ã— {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Suggested battery model",
        "usable_capacity": "Usable capacity",
        "suggested_battery": "Suggested model",
        "no_battery": "No battery recommended",
        "rounded_caption": "Rounded to nearest step for {battery_type} ({battery_step_display}).",
        "breakdown_line": "Self-consumption: {self:.1f} kWh + Backup reserve: {backup:.1f} kWh = Total: {total:.1f} kWh",
        "small_benefit": "Battery benefit too small based on your inputs.",
        "sanity": "System constraints & sanity check",
        "mppt_strings": "MPPTs: {mppts}, Max strings total: {strings}",
        "string_current": "Max string current: {current} A",
        "dcac_cap": "Max DC/AC ratio: {cap}",
        "quick_estimate": "This is a quick sizing tool â€” confirm with your installer.",
        "landing_hint": "Fill in your PV system details above to get a recommendation.",
        "south": "South", "southeast": "South-East", "southwest": "South-West",
        "east": "East", "west": "West", "north": "North",
        "northeast": "North-East", "northwest": "North-West"
    },
    # --- German ---
    "de": {
        "title": "ðŸ”‹ Sungrow Batteriesizer",
        "subtitle": "SchÃ¤tzen Sie die ideale Sungrow-Batterie- und WechselrichtergrÃ¶ÃŸe fÃ¼r Ihre PV-Anlage.",
        "system_type": "Systemtyp",
        "pv_consumption": "Ihre PV- & Verbrauchsdaten",
        "modules_installed": "Gesamtzahl der PV-Module",
        "module_wattage": "Modulleistung (Wp)",
        "annual_consumption": "JÃ¤hrlicher Stromverbrauch (kWh)",
        "roof_layout": "Dachanordnung",
        "where_modules": "Wo sind Ihre Module?",
        "all_one_side": "Alle auf einer Seite",
        "split_two_sides": "Auf zwei gegenÃ¼berliegenden Seiten verteilt",
        "orientation": "Ausrichtung",
        "tilt": "Neigung (Grad)",
        "main_side_orientation": "Ausrichtung Hauptseite",
        "daily_load_profile": "TÃ¤gliches Lastprofil",
        "choose_profile": "Profil auswÃ¤hlen",
        "p_balanced": "Ausgeglichen Tag/Nacht",
        "p_workday": "Arbeitstag abwesend (weniger Tageslast)",
        "p_home": "Meistens zuhause",
        "p_evening": "Abendspitzen",
        "p_heatpump": "WÃ¤rmepumpe / Tageslasten",
        "p_custom": "Benutzerdefiniert",
        "custom_day_pct": "Benutzerdefiniert: % der Tageslast am Tag",
        "backup_optional": "Backup (optional)",
        "backup_kw": "Kritische Lastleistung (kW)",
        "backup_h": "Dauer des Backups (Stunden)",
        "advanced": "Erweiterte Einstellungen",
        "specific_yield": "Spezifischer PV-Ertrag (kWh/kWp/Jahr)",
        "rte": "Batterie-Wirkungsgrad",
        "dod": "Batterie-Nutzungstiefe",
        "degradation": "ZusÃ¤tzliche KapazitÃ¤tsreserve fÃ¼r Alterung",
        "calculate": "Empfehlung berechnen",
        "inv_reco": "Wechselrichterempfehlung",
        "pv_dc_size": "PV-DC-Leistung",
        "suggested_inverter": "Empfohlenes Modell",
        "dcac_help": "DC/AC-VerhÃ¤ltnis: {ratio}, max erlaubt: {cap}",
        "dcac_warn": "Ihr DC/AC-VerhÃ¤ltnis Ã¼berschreitet das Maximum {cap}",
        "backup_power_warn": "Backup-Leistung ({need} kW) Ã¼bersteigt AC-Nennleistung ({ac} kW)",
        "battery_inputs": "Eingaben zur Batteriesizing",
        "orientation_tilt_line": "Ausrichtung: {orientation}, Neigung: {tilt}Â°",
        "profile_line": "Profil: {profile} â€” Tag {day}% / Nacht {night}%",
        "daily_load_line": "Tageslast: {daily_load:.1f} kWh â€” PV-Erzeugung: {daily_pv:.1f} kWh/Tag ({dc_kw:.1f} kW DC Ã— {specific_yield:.0f} kWh/kWp/Jahr)",
        "day_night_line": "Tageslast: {day_load:.1f} kWh â€” Nachtlast: {night_load:.1f} kWh",
        "surplus_shift_line": "TagÃ¼berschuss: {surplus:.1f} kWh â€” Verschiebbar in Nacht: {shiftable:.1f} kWh",
        "two_side_caption": "Ost/West-Anordnung reduziert Mittags-Peak und erhÃ¶ht Morgen/Abendproduktion.",
        "backup_req_line": "Backup-Bedarf: {kw:.1f} kW Ã— {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Empfohlene Batterie",
        "usable_capacity": "Nutzbare KapazitÃ¤t",
        "suggested_battery": "Empfohlenes Modell",
        "no_battery": "Keine Batterie empfohlen",
        "rounded_caption": "Aufgerundet auf nÃ¤chstes {battery_type}-SchrittmaÃŸ ({battery_step_display}).",
        "breakdown_line": "Eigenverbrauch: {self:.1f} kWh + Backup-Reserve: {backup:.1f} kWh = Gesamt: {total:.1f} kWh",
        "small_benefit": "Batterienutzen zu gering basierend auf Ihren Eingaben.",
        "sanity": "Systemgrenzen & PrÃ¼fung",
        "mppt_strings": "MPPTs: {mppts}, Max Strings gesamt: {strings}",
        "string_current": "Max. Stringstrom: {current} A",
        "dcac_cap": "Max DC/AC-VerhÃ¤ltnis: {cap}",
        "quick_estimate": "Dies ist ein Schnellrechner â€“ bitte mit Installateur bestÃ¤tigen.",
        "landing_hint": "Geben Sie oben Ihre PV-Anlagedaten ein, um eine Empfehlung zu erhalten.",
        "south": "SÃ¼d", "southeast": "SÃ¼dost", "southwest": "SÃ¼dwest",
        "east": "Ost", "west": "West", "north": "Nord",
        "northeast": "Nordost", "northwest": "Nordwest"
    },
    # --- Italian ---
    "it": {
        "title": "ðŸ”‹ Calcolatore Batteria Sungrow",
        "subtitle": "Stima la dimensione ideale della batteria e dell'inverter Sungrow per il tuo impianto FV.",
        "system_type": "Tipo di sistema",
        "pv_consumption": "Il tuo FV e consumo",
        "modules_installed": "Numero totale di moduli FV",
        "module_wattage": "Potenza modulo (Wp)",
        "annual_consumption": "Consumo annuo di energia (kWh)",
        "roof_layout": "Disposizione del tetto",
        "where_modules": "Dove sono i tuoi moduli?",
        "all_one_side": "Tutti su un lato",
        "split_two_sides": "Su due lati opposti",
        "orientation": "Orientamento",
        "tilt": "Inclinazione (gradi)",
        "main_side_orientation": "Orientamento lato principale",
        "daily_load_profile": "Profilo di carico giornaliero",
        "choose_profile": "Scegli un profilo",
        "p_balanced": "Bilanciato giorno/notte",
        "p_workday": "Giorno lavorativo fuori casa",
        "p_home": "A casa la maggior parte del giorno",
        "p_evening": "Picchi serali",
        "p_heatpump": "Pompa di calore / carichi diurni",
        "p_custom": "Personalizzato",
        "custom_day_pct": "% carico giornaliero diurno",
        "backup_optional": "Backup (opzionale)",
        "backup_kw": "Potenza carichi critici (kW)",
        "backup_h": "Durata backup (ore)",
        "advanced": "Impostazioni avanzate",
        "specific_yield": "Rendimento specifico FV (kWh/kWp/anno)",
        "rte": "Efficienza ciclo carica/scarica",
        "dod": "ProfonditÃ  di scarica utilizzabile",
        "degradation": "Riserva extra per degradazione",
        "calculate": "Calcola raccomandazione",
        "inv_reco": "Inverter raccomandato",
        "pv_dc_size": "Potenza FV DC",
        "suggested_inverter": "Modello suggerito",
        "dcac_help": "Rapporto DC/AC {ratio}, max consentito {cap}",
        "dcac_warn": "Rapporto DC/AC supera il massimo {cap}",
        "backup_power_warn": "Potenza backup richiesta ({need} kW) supera AC inverter ({ac} kW)",
        "battery_inputs": "Dati per calcolo batteria",
        "orientation_tilt_line": "Orientamento: {orientation}, Inclinazione: {tilt}Â°",
        "profile_line": "Profilo: {profile} â€” Giorno {day}% / Notte {night}%",
        "daily_load_line": "Carico giornaliero: {daily_load:.1f} kWh â€” Produzione FV: {daily_pv:.1f} kWh/giorno ({dc_kw:.1f} kW DC Ã— {specific_yield:.0f} kWh/kWp/anno)",
        "day_night_line": "Carico giorno: {day_load:.1f} kWh â€” Carico notte: {night_load:.1f} kWh",
        "surplus_shift_line": "Eccesso giorno: {surplus:.1f} kWh â€” Spostabile a notte: {shiftable:.1f} kWh",
        "two_side_caption": "Disposizione Est/Ovest riduce picco di mezzogiorno e aumenta produzione mattina/sera.",
        "backup_req_line": "Richiesta backup: {kw:.1f} kW Ã— {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Batteria consigliata",
        "usable_capacity": "CapacitÃ  utilizzabile",
        "suggested_battery": "Modello suggerito",
        "no_battery": "Nessuna batteria consigliata",
        "rounded_caption": "Arrotondato al passo piÃ¹ vicino per {battery_type} ({battery_step_display}).",
        "breakdown_line": "Autoconsumo: {self:.1f} kWh + Riserva backup: {backup:.1f} kWh = Totale: {total:.1f} kWh",
        "small_benefit": "Beneficio batteria troppo basso per i tuoi dati.",
        "sanity": "Limiti di sistema e verifica",
        "mppt_strings": "MPPT: {mppts}, Stringhe max totali: {strings}",
        "string_current": "Corrente max stringa: {current} A",
        "dcac_cap": "Rapporto DC/AC max: {cap}",
        "quick_estimate": "Calcolo rapido â€” conferma con lâ€™installatore.",
        "landing_hint": "Inserisci i dati FV per ottenere raccomandazione.",
        "south": "Sud", "southeast": "Sud-Est", "southwest": "Sud-Ovest",
        "east": "Est", "west": "Ovest", "north": "Nord",
        "northeast": "Nord-Est", "northwest": "Nord-Ovest"
    },
    # --- French ---
    "fr": {
        "title": "ðŸ”‹ Calculateur de Batterie Sungrow",
        "subtitle": "Estimez la taille idÃ©ale de batterie et d'onduleur Sungrow pour votre installation PV.",
        "system_type": "Type de systÃ¨me",
        "pv_consumption": "Votre PV & consommation",
        "modules_installed": "Nombre total de modules PV",
        "module_wattage": "Puissance du module (Wp)",
        "annual_consumption": "Consommation annuelle d'Ã©lectricitÃ© (kWh)",
        "roof_layout": "Disposition du toit",
        "where_modules": "OÃ¹ sont vos modules ?",
        "all_one_side": "Tous d'un cÃ´tÃ©",
        "split_two_sides": "RÃ©partis sur deux cÃ´tÃ©s opposÃ©s",
        "orientation": "Orientation",
        "tilt": "Inclinaison (degrÃ©s)",
        "main_side_orientation": "Orientation cÃ´tÃ© principal",
        "daily_load_profile": "Profil de charge journalier",
        "choose_profile": "Choisir un profil",
        "p_balanced": "Ã‰quilibrÃ© jour/nuit",
        "p_workday": "En journÃ©e au travail (faible usage diurne)",
        "p_home": "Ã€ la maison la plupart de la journÃ©e",
        "p_evening": "Pics en soirÃ©e",
        "p_heatpump": "Pompe Ã  chaleur / charges diurnes",
        "p_custom": "PersonnalisÃ©",
        "custom_day_pct": "% de la charge quotidienne en journÃ©e",
        "backup_optional": "Backup (optionnel)",
        "backup_kw": "Puissance des charges critiques (kW)",
        "backup_h": "DurÃ©e du backup (heures)",
        "advanced": "ParamÃ¨tres avancÃ©s",
        "specific_yield": "Productible PV spÃ©cifique (kWh/kWp/an)",
        "rte": "Rendement aller-retour batterie",
        "dod": "Profondeur de dÃ©charge utilisable",
        "degradation": "RÃ©serve de capacitÃ© supplÃ©mentaire pour dÃ©gradation",
        "calculate": "Calculer la recommandation",
        "inv_reco": "Onduleur recommandÃ©",
        "pv_dc_size": "Puissance PV DC",
        "suggested_inverter": "ModÃ¨le suggÃ©rÃ©",
        "dcac_help": "Rapport DC/AC {ratio}, max autorisÃ© {cap}",
        "dcac_warn": "Rapport DC/AC dÃ©passe le max {cap}",
        "backup_power_warn": "Besoins backup ({need} kW) dÃ©passent la puissance AC ({ac} kW)",
        "battery_inputs": "DonnÃ©es pour dimensionnement batterie",
        "orientation_tilt_line": "Orientation : {orientation}, Inclinaison : {tilt}Â°",
        "profile_line": "Profil : {profile} â€” Jour {day}% / Nuit {night}%",
        "daily_load_line": "Charge journaliÃ¨re : {daily_load:.1f} kWh â€” Production PV : {daily_pv:.1f} kWh/jour ({dc_kw:.1f} kW DC Ã— {specific_yield:.0f} kWh/kWp/an)",
        "day_night_line": "Charge jour : {day_load:.1f} kWh â€” Charge nuit : {night_load:.1f} kWh",
        "surplus_shift_line": "Surplus jour : {surplus:.1f} kWh â€” TransfÃ©rable la nuit : {shiftable:.1f} kWh",
        "two_side_caption": "Disposition Est/Ouest rÃ©duit le pic de midi et augmente la production matin/soir.",
        "backup_req_line": "Besoins backup : {kw:.1f} kW Ã— {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "Batterie recommandÃ©e",
        "usable_capacity": "CapacitÃ© utilisable",
        "suggested_battery": "ModÃ¨le suggÃ©rÃ©",
        "no_battery": "Aucune batterie recommandÃ©e",
        "rounded_caption": "Arrondi Ã  l'Ã©tape la plus proche pour {battery_type} ({battery_step_display}).",
        "breakdown_line": "Autoconsommation : {self:.1f} kWh + RÃ©serve backup : {backup:.1f} kWh = Total : {total:.1f} kWh",
        "small_benefit": "Avantage batterie trop faible selon vos donnÃ©es.",
        "sanity": "Contraintes systÃ¨me & vÃ©rification",
        "mppt_strings": "MPPT : {mppts}, Nombre max de strings : {strings}",
        "string_current": "Courant max string : {current} A",
        "dcac_cap": "Rapport DC/AC max : {cap}",
        "quick_estimate": "Ceci est un calcul rapide â€” confirmez avec votre installateur.",
        "landing_hint": "Remplissez vos donnÃ©es PV ci-dessus pour obtenir une recommandation.",
        "south": "Sud", "southeast": "Sud-Est", "southwest": "Sud-Ouest",
        "east": "Est", "west": "Ouest", "north": "Nord",
        "northeast": "Nord-Est", "northwest": "Nord-Ouest"
    },
    # --- Spanish ---
    "es": {
        "title": "ðŸ”‹ Calculadora de BaterÃ­a Sungrow",
        "subtitle": "Estima el tamaÃ±o ideal de la baterÃ­a e inversor Sungrow para tu sistema FV.",
        "system_type": "Tipo de sistema",
        "pv_consumption": "Tu FV y consumo",
        "modules_installed": "NÃºmero total de mÃ³dulos FV",
        "module_wattage": "Potencia del mÃ³dulo (Wp)",
        "annual_consumption": "Consumo anual de electricidad (kWh)",
        "roof_layout": "DiseÃ±o del tejado",
        "where_modules": "Â¿DÃ³nde estÃ¡n tus mÃ³dulos?",
        "all_one_side": "Todos en un lado",
        "split_two_sides": "Divididos en dos lados opuestos",
        "orientation": "OrientaciÃ³n",
        "tilt": "InclinaciÃ³n (grados)",
        "main_side_orientation": "OrientaciÃ³n del lado principal",
        "daily_load_profile": "Perfil de carga diario",
        "choose_profile": "Elegir un perfil",
        "p_balanced": "Equilibrado dÃ­a/noche",
        "p_workday": "DÃ­a laboral fuera de casa",
        "p_home": "En casa la mayor parte del dÃ­a",
        "p_evening": "Picos nocturnos",
        "p_heatpump": "Bomba de calor / cargas diurnas",
        "p_custom": "Personalizado",
        "custom_day_pct": "% de carga diaria en el dÃ­a",
        "backup_optional": "Respaldo (opcional)",
        "backup_kw": "Potencia de cargas crÃ­ticas (kW)",
        "backup_h": "DuraciÃ³n del respaldo (horas)",
        "advanced": "Configuraciones avanzadas",
        "specific_yield": "ProducciÃ³n especÃ­fica FV (kWh/kWp/aÃ±o)",
        "rte": "Eficiencia ciclo completo baterÃ­a",
        "dod": "Profundidad de descarga utilizable",
        "degradation": "Reserva extra por degradaciÃ³n",
        "calculate": "Calcular recomendaciÃ³n",
        "inv_reco": "Inversor recomendado",
        "pv_dc_size": "Potencia FV DC",
        "suggested_inverter": "Modelo sugerido",
        "dcac_help": "RelaciÃ³n DC/AC {ratio}, mÃ¡ximo permitido {cap}",
        "dcac_warn": "RelaciÃ³n DC/AC supera el mÃ¡ximo {cap}",
        "backup_power_warn": "Necesidad de respaldo ({need} kW) excede la potencia AC ({ac} kW)",
        "battery_inputs": "Datos para dimensionar la baterÃ­a",
        "orientation_tilt_line": "OrientaciÃ³n: {orientation}, InclinaciÃ³n: {tilt}Â°",
        "profile_line": "Perfil: {profile} â€” DÃ­a {day}% / Noche {night}%",
        "daily_load_line": "Carga diaria: {daily_load:.1f} kWh â€” ProducciÃ³n FV: {daily_pv:.1f} kWh/dÃ­a ({dc_kw:.1f} kW DC Ã— {specific_yield:.0f} kWh/kWp/aÃ±o)",
        "day_night_line": "Carga dÃ­a: {day_load:.1f} kWh â€” Carga noche: {night_load:.1f} kWh",
        "surplus_shift_line": "Excedente dÃ­a: {surplus:.1f} kWh â€” Transferible a noche: {shiftable:.1f} kWh",
        "two_side_caption": "DisposiciÃ³n Este/Oeste reduce el pico del mediodÃ­a y aumenta producciÃ³n maÃ±ana/tarde.",
        "backup_req_line": "Necesidad de respaldo: {kw:.1f} kW Ã— {h:.1f} h = {energy:.1f} kWh",
        "batt_reco": "BaterÃ­a recomendada",
        "usable_capacity": "Capacidad utilizable",
        "suggested_battery": "Modelo sugerido",
        "no_battery": "No se recomienda baterÃ­a",
        "rounded_caption": "Redondeado al paso mÃ¡s cercano para {battery_type} ({battery_step_display}).",
        "breakdown_line": "Autoconsumo: {self:.1f} kWh + Reserva respaldo: {backup:.1f} kWh = Total: {total:.1f} kWh",
        "small_benefit": "Beneficio de baterÃ­a demasiado pequeÃ±o segÃºn tus datos.",
        "sanity": "Restricciones del sistema y verificaciÃ³n",
        "mppt_strings": "MPPT: {mppts}, MÃ¡x. cadenas totales: {strings}",
        "string_current": "Corriente mÃ¡x. por cadena: {current} A",
        "dcac_cap": "RelaciÃ³n DC/AC mÃ¡x: {cap}",
        "quick_estimate": "CÃ¡lculo rÃ¡pido â€” confirma con tu instalador.",
        "landing_hint": "Introduce los datos FV para obtener recomendaciÃ³n.",
        "south": "Sur", "southeast": "Sureste", "southwest": "Suroeste",
        "east": "Este", "west": "Oeste", "north": "Norte",
        "northeast": "Noreste", "northwest": "Noroeste"
    }
}

def get_text(lang, key):
    return TRANSLATIONS.get(lang, {}).get(key, TRANSLATIONS["en"].get(key, key))